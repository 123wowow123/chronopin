<div ng-switch="$ctrl.getTimelineStatus()" class="main">
  
  <profile-block ng-if="$ctrl.userName" user-name="$ctrl.userName"></profile-block>

  <div class="container-fluid main__timeline --search">
    <div class="row">

      <div class="col-lg-12" ng-switch="$ctrl.viewType">
        <ul class="timeline" ng-switch-default>
          <li id="{{bag.toISODateTimeString()}}" class="timeline__group-container" data-ng-repeat="bag in $ctrl.bags"
            waypoint="$ctrl.updateInView(event)">
            <time-block bag="bag" config="$ctrl.appConfig"></time-block>
          </li>
        </ul>

        <ul ng-if="$ctrl.sortedPins.length" class="match__group-section dynamic-grid" ng-switch-when="match">
          <li id="{{pin.id}}" class="grid --timeline" data-ng-repeat="pin in $ctrl.sortedPins"
            ng-class="{'--closest': $ctrl.isPinInClosestFutureBag(pin.id), '--close': $ctrl.isPinInCloseFutureBag(pin.id)}">
            <pin-block pin="pin" config="$ctrl.appConfig" show-search-score="false"></pin-block>
          </li>
        </ul>

      </div>
    </div>
  </div>

  <div class="page_message" ng-switch-when="no match">
    <h3 class="text-muted">
      No results found, please try a different search
    </h3>
  </div>

  <div class="page_loading" ng-switch-when="searching">
    <h3 class="text-muted">
      <loader-pac></loader-pac>
      <!-- searching... -->
    </h3>
  </div>



  <div class="toggle_view" ng-class="{'--profile-offset': $ctrl.userName}">
    <button type="button" ng-click="$ctrl.setView('timeline')" ng-class="{'active': $ctrl.viewType === 'timeline'}"
      title="Sort By Event Date">
      <i class="fa fa-calendar-o" aria-hidden="true"></i>
    </button>
    <button type="button" ng-click="$ctrl.setView('match')" ng-class="{'active': $ctrl.viewType === 'match'}"
      title="Sort By Best Match">
      <i class="fa fa-th-large" aria-hidden="true"></i>
    </button>
  </div>

  <scroll scroll-to-id="$ctrl.getTodaySearchScrollId()"></scroll>
</div>