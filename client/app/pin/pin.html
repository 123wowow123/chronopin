<div class="pin">
  <div class="pin__content">
    <div>
      <!-- Google Ads-->
      <ins class="adsbygoogle" style="display:block" data-ad-format="autorelaxed"
        data-ad-client="ca-pub-4845333369058390" data-ad-slot="6184404789"></ins>

      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4845333369058390" data-ad-slot="7661137981"
        data-ad-format="auto" data-full-width-responsive="true"></ins>
    </div>

    <div class="pin__preview">

      <div class="pin__panel" ng-if="$ctrl.pinReady">

        <!-- Switch between image / iframe / tweets -->
        <div class="grid__media" ng-switch="$ctrl.pin.media[0].type">

          <div ng-switch-when="1">
            <a class="pin__asset pin__asset--link" ng-if="$ctrl.pin.media[0].thumbName"
              ng-href="{{$ctrl.pin.sourceUrl}}" target="_blank"
              ng-attr-aria-label="Read more about {{$ctrl.pin.title}} from the source page">
              <img ng-src="{{$ctrl.appConfig.thumbUrlPrefix + $ctrl.pin.media[0].thumbName}}" class="pin__image"
                loading="lazy" width="{{$ctrl.pin.media[0].thumbWidth}}" height="{{$ctrl.pin.media[0].thumbHeight}}" />
            </a>
          </div>

          <twitter-pin ng-switch-when="2" html="{{$ctrl.pin.media[0].html}}">
          </twitter-pin>

          <div class='embed-container' ng-switch-when="3" ng-bind-html="$ctrl.pin.media[0].html">
          </div>

          <!-- <div ng-switch-default></div> -->
        </div>

        <div class="grid__headline --meta">
          <div class="headline-left">

            <time class="posted-time" datetime="{{$ctrl.pin.utcCreatedDateTime}}">
              {{$ctrl.pin.utcCreatedDateTime | date : "MM/dd/yyyy 'at' h:mm a" | lowercase}}
            </time>

            <span class="rubric__divider">/</span>
            <a ng-href="/search?q={{$ctrl.pin.user.userName}}" class="rubric"
              ng-attr-aria-label="Read more pins posted from or containing user {{$ctrl.pin.user.userName}}">
              <span>{{$ctrl.pin.user.userName}}</span>
            </a>
          </div>

          <div class="grid__uploaded-date" ng-switch="$ctrl.pin.allDay">
            <span ng-switch-when="true">
              <em>
                <time datetime='{{$ctrl.pin.utcStartDateTime}}'>Starts {{$ctrl.pin.utcStartDateTime |
                  date:"MM/dd/yyyy"}}</time>
                <time datetime='PT24H'> - All day</time>
              </em>
            </span>
            <em ng-switch-default>
              <time datetime='{{$ctrl.pin.utcStartDateTime}}'>Starts {{$ctrl.pin.utcStartDateTime | date:"MM/dd/yyyy
                h:mma"}}</time>
              <span ng-if="$ctrl.pin.utcEndDateTime">to</span>
              <time ng-if="$ctrl.pin.utcEndDateTime" datetime='{{$ctrl.pin.utcEndDateTime}}'>{{$ctrl.pin.utcEndDateTime
                | date:"MM/dd/yyyy h:mma"}}</time>
            </em>
          </div>
        </div>

        <h1 class="grid__heading">
          <a href="{{$ctrl.pin.sourceUrl}}" target="_blank"
            ng-attr-aria-label="Read more about {{$ctrl.pin.title}} from the source page">
            {{$ctrl.pin.title}}
          </a>
          <a class="external-link-icon" href="{{$ctrl.pin.sourceUrl}}" target="_blank" aria-hidden="true" tabindex="-1">
            <i class='fa fa-external-link'></i>
          </a>
        </h1>

        <div class="grid__body">

          <div class="grid__description" ng-bind-html="$ctrl.pin.description"></div>
          <div class="grid__footer">

            <div class="grid__footer-left">

              <div class="grid__merchant">

                <div class="merchant merchant-price " ng-class="{'grid__price--negative': $ctrl.pin.price < 0}"
                  ng-if="$ctrl.pin.price">
                  <span class="msrp">MSRP</span>
                  <span class="merchant-price">{{$ctrl.pin.price | money}}</span>
                </div>

                <!-- Merchant Ads-->
                <!-- <a target="_blank" class="gamestop__merchant-link"
                  href="{{$ctrl.pin.merchant.gamestop.url || 'https://click.linksynergy.com/fs-bin/click?id=Y1h47rHzgYg&offerid=1270124.10006500&type=3&subid='}}"
                  ng-if="$ctrl.pin.merchant.gamestop.url || true">
                  <img alt="Gamestop logo" src="https://merchant.linksynergy.com/fs/banners/24348/24348_10000852.png" />
  
                  <span class="merchant-price"
                    ng-class="{'grid__price--negative': $ctrl.pin.price < 0}">{{merchant.price | money}}</span>
                </a> -->
                <!-- <a target="_blank" class="amazon__merchant-link" href="{{$ctrl.pin.merchant.amazon.url}}"
                  ng-if="!!$ctrl.pin.merchant.amazon.url">
                  <img alt="Amazon logo" src="/assets/images/OIP.jpeg" />
  
                  <span class="merchant-price"
                    ng-class="{'grid__price--negative': $ctrl.pin.price < 0}">{{merchant.price | money}}</span>
                </a> -->
                <div class="merchant" ng-repeat="merchant in $ctrl.pin.merchants track by $index">
                  <a target="_blank" class="merchant generic__merchant-link" href="{{merchant.url}}"
                    ng-if="!!merchant.url" ng-attr-aria-label="Purchase {{merchant.label}} for {{merchant.price
                      | money}}">
                    <!-- <i class="fa fa-shopping-cart" aria-hidden="true"></i> -->
                    <span class="merchant-label" title="{{merchant.label}}">{{merchant.label}}</span>
                    <span class="merchant-price"
                      ng-class="{'grid__price--negative': $ctrl.pin.price < 0}">{{merchant.price
                      | money}}</span>
                  </a>
                </div>

              </div>
            </div>

            <div class="grid__footer-right">
              <div class="grid__social">
                <div class="grid__watch" ng-switch="!!$ctrl.pin.hasFavorite">
                  <button type="button" class="grid__favorite --add" ng-click="$ctrl.addFavorite($ctrl.pin)"
                    title="Add to watch" ng-switch-default><i class="fa fa-eye" aria-hidden="true"></i>
                    {{$ctrl.pin.favoriteCount}}</button>
                  <button type="button" class="grid__favorite --remove" ng-click="$ctrl.removeFavorite($ctrl.pin)"
                    title="Remove from watch" ng-switch-when="true"><i class="fa fa-eye" aria-hidden="true"></i>
                    {{$ctrl.pin.favoriteCount}}</button>
                </div>

                <div class="grid__watch" ng-switch="!!$ctrl.pin.hasLike">
                  <!-- <div fb-like page-href="{{$ctrl.pin.sourceUrl}}">
                      <loader-pulse-bubble></loader-pulse-bubble>
                  </div> -->
                  <button type="button" class="grid__favorite --add" title="Like Pin"
                    ng-click="!$ctrl.disableLink && $ctrl.addLike($ctrl.pin)" ng-switch-default>
                    <i class="fa fa-thumbs-o-up" aria-hidden="true"></i> {{$ctrl.pin.likeCount}}</button>
                  <button type="button" class="grid__favorite --remove" title="Remove Like Pin"
                    ng-click="!$ctrl.disableLink && $ctrl.removeLike($ctrl.pin)" ng-switch-when="true">
                    <i class="fa fa-thumbs-o-up" aria-hidden="true"></i> {{$ctrl.pin.likeCount}}</button>

                </div>

                <div class="grid__tip" ng-if="$ctrl.isAdmin()">
                  <button class="btn btn-link" ui-sref="update({id:$ctrl.pin.id})" title="Edit Pin"><i
                      class="fa fa-pencil" aria-hidden="true"></i></button>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>

    </div>

    <div class="pin__right_pannel">
      <div class="pin__right_pannel_content">
        <!-- Google Map-->
        <div class="pin__map embed" ng-if="$ctrl.hasMap() && $ctrl.getGoogleMapUrl()">
          <iframe width="600" height="450" style="border:0" loading="lazy" allowfullscreen
            referrerpolicy="no-referrer-when-downgrade" ng-src="{{$ctrl.getGoogleMapUrl()}}">
          </iframe>
        </div>

        <div class="pin__map_locations" ng-if="$ctrl.hasMap() && $ctrl.getGoogleMapUrl()">
          <i class="fa fa-map-marker" aria-hidden="true"></i>
          <address class="pin__map_location" ng-repeat="location in $ctrl.pin.locations track by $index">
            {{location.address}}</address>
        </div>

        <div class="pin__thread">
          <thread ng-if="!!$ctrl.pin.id" pin-id="$ctrl.pin.id" config="$ctrl.appConfig"></thread>
        </div>

        <div class="pin__thread_bottom_ads">
          <!-- Google Ads-->
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4845333369058390"
            data-ad-slot="2802659011" data-ad-format="auto" data-full-width-responsive="true"></ins>
          <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4845333369058390"
            data-ad-slot="2802659011" data-ad-format="auto" data-full-width-responsive="true"></ins>
        </div>

        <div class="pin__comment">
          <comment comment-url="{{'/pin/'+$ctrl.pin.id}}" title="{{$ctrl.pin.title}}"></comment>
        </div>
      </div>
      <div class="pin__right_pannel_wide_ads">
        <!-- Google Ads-->
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4845333369058390"
          data-ad-slot="5947697108" data-ad-format="auto" data-full-width-responsive="true"></ins>
        </amp-ad>
      </div>

    </div>


    <div class="pin__center-ads">
      <div id="amzn-assoc-ad-98cb6875-162d-4a0a-ae94-43b14e993e7c"></div>
      <script async
        src="//z-na.amazon-adsystem.com/widgets/onejs?MarketPlace=US&adInstanceId=98cb6875-162d-4a0a-ae94-43b14e993e7c"></script>

      <!-- Google Ads-->
      <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-4845333369058390" data-ad-slot="9433708055"
        data-ad-format="auto" data-full-width-responsive="true"></ins>
    </div>

    <div class="page_loading" ng-if="!$ctrl.pinReady">
      <h3 class="text-muted">
        <loader-pac></loader-pac>
        <!-- loading... -->
      </h3>
    </div>
  </div>

  <div class="pin_suggestions">

    <ul class="dynamic-grid" angular-grid="$ctrl.pinsQuery" cssGrid="true" ag-refresh-on-img-load="false"
      ag-reflowed="$ctrl.reflowed($event)">
      <li id="{{pin.id}}" class="grid" data-ng-repeat="pin in $ctrl.pinsQuery">

        <pin-block pin="pin" config="$ctrl.appConfig"></pin-block>

      </li>
    </ul>

    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

  </div>
</div>